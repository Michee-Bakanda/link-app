{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useContext } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FontAwesome5 from \"@expo/vector-icons/FontAwesome5\";\nimport axios from \"axios\";\nimport { LinkContext } from \"../../context/link\";\nimport { AuthContext } from \"../../context/auth\";\nimport IconSet from \"./IconSet\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar PreviewCard = function PreviewCard(_ref) {\n  var _ref$ogTitle = _ref.ogTitle,\n      ogTitle = _ref$ogTitle === void 0 ? \"Untitled\" : _ref$ogTitle,\n      _ref$ogDescription = _ref.ogDescription,\n      ogDescription = _ref$ogDescription === void 0 ? \"No description found...\" : _ref$ogDescription,\n      _ref$ogImage = _ref.ogImage,\n      ogImage = _ref$ogImage === void 0 ? {\n    url: \"https://via.placeholder.com/500x500.png?text=Image\"\n  } : _ref$ogImage,\n      _ref$handlePress = _ref.handlePress,\n      handlePress = _ref$handlePress === void 0 ? function (f) {\n    return f;\n  } : _ref$handlePress,\n      _ref$link = _ref.link,\n      link = _ref$link === void 0 ? {} : _ref$link,\n      _ref$showIcons = _ref.showIcons,\n      showIcons = _ref$showIcons === void 0 ? false : _ref$showIcons;\n\n  var _useContext = useContext(LinkContext),\n      _useContext2 = _slicedToArray(_useContext, 2),\n      links = _useContext2[0],\n      setLinks = _useContext2[1];\n\n  var _useContext3 = useContext(AuthContext),\n      _useContext4 = _slicedToArray(_useContext3, 2),\n      auth = _useContext4[0],\n      setAuth = _useContext4[1];\n\n  var handleLikePress = function handleLikePress(link) {\n    var _await$axios$put, data;\n\n    return _regeneratorRuntime.async(function handleLikePress$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(axios.put(\"/like\", {\n              linkId: link._id\n            }));\n\n          case 2:\n            _await$axios$put = _context.sent;\n            data = _await$axios$put.data;\n            setLinks(function (links) {\n              var index = links.findIndex(function (l) {\n                return l._id === link._id;\n              });\n              data.postedBy = auth.user;\n              links[index] = data;\n              return _toConsumableArray(links);\n            });\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var handleUnLikePress = function handleUnLikePress(link) {\n    var _await$axios$put2, data;\n\n    return _regeneratorRuntime.async(function handleUnLikePress$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(axios.put(\"/unlike\", {\n              linkId: link._id\n            }));\n\n          case 2:\n            _await$axios$put2 = _context2.sent;\n            data = _await$axios$put2.data;\n            setLinks(function (links) {\n              var index = links.findIndex(function (l) {\n                return l._id === link._id;\n              });\n              data.postedBy = auth.user;\n              links[index] = data;\n              return _toConsumableArray(links);\n            });\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var ogImageUrl = function ogImageUrl(ogImage) {\n    if (ogImage != null && ogImage.url) {\n      return ogImage.url;\n    } else if ((ogImage == null ? void 0 : ogImage.length) > 0) {\n      return ogImage[0].url;\n    } else {\n      return \"https://via.placeholder.com/500x500.png?text=Image\";\n    }\n  };\n\n  return _jsxs(View, {\n    style: {\n      backgroundColor: \"#fff\",\n      width: \"92%\",\n      height: 280,\n      borderRadius: \"14px\",\n      shadowColor: \"#171717\",\n      shadowOffset: {\n        width: -2,\n        height: 4\n      },\n      shadowOpacity: 0.2,\n      shadowRadius: 3,\n      marginBottom: 20\n    },\n    children: [_jsx(Image, {\n      style: {\n        height: \"70%\",\n        width: \"100%\",\n        borderTopRightRadius: 14,\n        borderTopLeftRadius: 14\n      },\n      source: {\n        uri: ogImageUrl(ogImage)\n      }\n    }), _jsx(View, {\n      style: showIcons ? {\n        marginBottom: -40\n      } : {},\n      children: _jsx(IconSet, {\n        handleLikePress: handleLikePress,\n        handleUnLikePress: handleUnLikePress,\n        link: link,\n        showIcons: showIcons,\n        auth: auth\n      })\n    }), _jsx(TouchableOpacity, {\n      onPress: function onPress() {\n        return handlePress(link);\n      },\n      children: _jsxs(View, {\n        style: {\n          padding: 5,\n          height: 50\n        },\n        children: [_jsx(Text, {\n          style: {\n            paddingTop: 5,\n            paddingBottom: 5\n          },\n          children: ogTitle\n        }), _jsx(Text, {\n          children: ogDescription\n        })]\n      })\n    })]\n  });\n};\n\nexport default PreviewCard;","map":{"version":3,"names":["React","useContext","FontAwesome5","axios","LinkContext","AuthContext","IconSet","PreviewCard","ogTitle","ogDescription","ogImage","url","handlePress","f","link","showIcons","links","setLinks","auth","setAuth","handleLikePress","put","linkId","_id","data","index","findIndex","l","postedBy","user","handleUnLikePress","ogImageUrl","length","backgroundColor","width","height","borderRadius","shadowColor","shadowOffset","shadowOpacity","shadowRadius","marginBottom","borderTopRightRadius","borderTopLeftRadius","uri","padding","paddingTop","paddingBottom"],"sources":["/home/michee/Documents/link/105_loading/client/components/links/PreviewCard.js"],"sourcesContent":["import React, { useContext } from \"react\";\nimport { View, Image, TouchableOpacity,Text } from \"react-native\";\n// import Text from \"//@kaloraat/react-native-text\";\nimport FontAwesome5 from \"react-native-vector-icons/FontAwesome5\";\nimport axios from \"axios\";\nimport { LinkContext } from \"../../context/link\";\nimport { AuthContext } from \"../../context/auth\";\nimport IconSet from \"./IconSet\";\n\nconst PreviewCard = ({\n  ogTitle = \"Untitled\",\n  ogDescription = \"No description found...\",\n  ogImage = { url: \"https://via.placeholder.com/500x500.png?text=Image\" },\n  handlePress = (f) => f,\n  link = {},\n  showIcons = false,\n}) => {\n  // context\n  const [links, setLinks] = useContext(LinkContext);\n  const [auth, setAuth] = useContext(AuthContext);\n\n  const handleLikePress = async (link) => {\n    // console.log(\"link clicked\", link._id);\n    const { data } = await axios.put(\"/like\", { linkId: link._id });\n    setLinks((links) => {\n      const index = links.findIndex((l) => l._id === link._id);\n      data.postedBy = auth.user;\n      links[index] = data;\n      return [...links];\n    });\n  };\n\n  const handleUnLikePress = async (link) => {\n    // console.log(\"link clicked\", link._id);\n    const { data } = await axios.put(\"/unlike\", { linkId: link._id });\n    setLinks((links) => {\n      const index = links.findIndex((l) => l._id === link._id);\n      data.postedBy = auth.user;\n      links[index] = data;\n      return [...links];\n    });\n  };\n\n  const ogImageUrl = (ogImage) => {\n    if (ogImage?.url) {\n      return ogImage.url;\n    } else if (ogImage?.length > 0) {\n      return ogImage[0].url;\n    } else {\n      return \"https://via.placeholder.com/500x500.png?text=Image\";\n    }\n  };\n\n  return (\n    <View\n      style={{\n        backgroundColor: \"#fff\",\n        width: \"92%\",\n        height: 280,\n        borderRadius: \"14px\",\n        shadowColor: \"#171717\",\n        shadowOffset: { width: -2, height: 4 },\n        shadowOpacity: 0.2,\n        shadowRadius: 3,\n        marginBottom: 20,\n      }}\n    >\n      <Image\n        style={{\n          height: \"70%\",\n          width: \"100%\",\n          borderTopRightRadius: 14,\n          borderTopLeftRadius: 14,\n        }}\n        source={{ uri: ogImageUrl(ogImage) }}\n      />\n\n      <View style={showIcons ? { marginBottom: -40 } : {}}>\n        <IconSet\n          handleLikePress={handleLikePress}\n          handleUnLikePress={handleUnLikePress}\n          link={link}\n          showIcons={showIcons}\n          auth={auth}\n        />\n      </View>\n\n      <TouchableOpacity onPress={() => handlePress(link)}>\n        <View style={{ padding: 5, height: 50 }}>\n          <Text  style={{ paddingTop: 5, paddingBottom: 5 }}>\n            {ogTitle}\n          </Text>\n          <Text >{ogDescription}</Text>\n        </View>\n      </TouchableOpacity>\n    </View>\n  );\n};\n\nexport default PreviewCard;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}